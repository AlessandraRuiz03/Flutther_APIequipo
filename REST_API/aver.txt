

CREATE PROCEDURE usersAddOrEdit (
	IN _id INT,
	IN _usuario VARCHAR(50),
	IN _contra VARCHAR(50),
	IN _imagen VARCHAR(50),
	IN _nombre VARCHAR(50),
	IN _apellido VARCHAR(50),
	IN _direccion VARCHAR(100),
	IN _edad INT
)
BEGIN
	IF _id = 0 THEN
		INSERT INTO users (usuario, contra)
		VALUES (_usuario, _contra);
		SET id = LAST_INSERT_ID();
	ELSE
		UPDATE users
		SET
			imagen = _imagen,
			nombre = _nombre,
			apellido = _apellido,
			direccion = _direccion,
			edad = _edad
			WHERE id = _id;
	END IF;
	
	SELECT _id AS id
ENDmobilemobile



CREATE TABLE `users` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`usuario` VARCHAR(50) NOT NULL,
	`contra` VARCHAR(50) NULL,
	`imagen` VARCHAR(50) NULL,
	`nombre` VARCHAR(50) NULL,
	`apellido` VARCHAR(50) NULL,
	`direccion` VARCHAR(100) NULL,
	`edad` INT NULL,
	PRIMARY KEY (`id`),
	UNIQUE INDEX `usuario` (`usuario`)
)
COLLATE='utf8mb4_general_ci'
;
